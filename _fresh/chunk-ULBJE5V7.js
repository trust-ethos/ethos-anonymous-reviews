import{a as m,c as o}from"./chunk-BFVMAUAC.js";import{a as t}from"./chunk-BYRZ2NRM.js";function y({selectedProfile:a,onProfileSelect:f}){let i=o(""),r=o([]),v=o(!1),n=o(!1),u=o(null),h=async e=>{if(!e.trim()){r.value=[],n.value=!1;return}v.value=!0;try{let l=await fetch(`https://api.ethos.network/api/v2/users/search?query=${encodeURIComponent(e)}&userKeyType=TWITTER&limit=10&offset=0`);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);let g=(await l.json()).values||[];r.value=g.map(s=>({id:s.id,profileId:s.profileId,displayName:s.displayName,username:s.username,avatarUrl:s.avatarUrl,score:s.score||0,description:s.description})),n.value=!0}catch(l){console.error("Error searching profiles:",l),r.value=[],n.value=!1}finally{v.value=!1}},b=e=>{if(u.value&&clearTimeout(u.value),!e.trim()){r.value=[],n.value=!1,v.value=!1;return}u.value=setTimeout(()=>{h(e)},300)},p=e=>{let l=e.target;i.value=l.value,b(l.value)},x=e=>{f(e),i.value="",r.value=[],n.value=!1,u.value&&(clearTimeout(u.value),u.value=null)};m(()=>()=>{u.value&&clearTimeout(u.value)},[]);let d=e=>e<800?"text-red-400":e<1200?"text-yellow-400":e<1600?"text-neutral-400":e<2e3?"text-blue-400":e<2400?"text-green-400":"text-purple-400",c=e=>e<800?"Untrusted":e<1200?"Questionable":e<1600?"Neutral":e<2e3?"Reputable":e<2400?"Exemplary":"Revered";return t("div",{class:"relative",children:[a?.value&&t("div",{class:"mb-4 p-3 bg-neutral-800 border border-neutral-700 rounded-md",children:t("div",{class:"flex items-center justify-between",children:[t("div",{class:"flex items-center gap-3",children:[t("div",{class:"w-8 h-8 rounded-full bg-neutral-600 flex items-center justify-center text-sm font-medium overflow-hidden",children:a?.value?.avatarUrl?t("img",{src:a?.value?.avatarUrl,alt:a?.value?.username,class:"w-full h-full object-cover"}):a?.value?.username?.charAt(0).toUpperCase()}),t("div",{children:[t("div",{class:"font-medium",children:a?.value?.displayName||`@${a?.value?.username}`}),t("div",{class:"text-xs text-neutral-400",children:["@",a?.value?.username]}),t("div",{class:`text-xs ${d(a?.value?.score||0)}`,children:[a?.value?.score," - ",c(a?.value?.score||0)]})]})]}),t("button",{type:"button",onClick:()=>a&&(a.value=null),class:"text-neutral-400 hover:text-neutral-200 text-sm",children:"\u2715"})]})}),!a?.value&&t("div",{class:"relative",children:[t("input",{type:"text",value:i.value,onInput:p,placeholder:"Search for X accounts...",class:"w-full px-3 py-2 bg-neutral-800 border border-neutral-700 rounded-md text-sm placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-500 focus:border-transparent"}),v.value&&t("div",{class:"absolute right-3 top-1/2 transform -translate-y-1/2",children:t("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-neutral-400"})}),n.value&&r.value.length>0&&t("div",{class:"absolute z-10 w-full mt-1 bg-neutral-800 border border-neutral-700 rounded-md shadow-lg max-h-60 overflow-y-auto",children:r.value.map(e=>t("button",{type:"button",onClick:()=>x(e),class:"w-full px-3 py-2 text-left hover:bg-neutral-700 focus:bg-neutral-700 focus:outline-none first:rounded-t-md last:rounded-b-md",children:t("div",{class:"flex items-center gap-3",children:[t("div",{class:"w-8 h-8 rounded-full bg-neutral-600 flex items-center justify-center text-sm font-medium overflow-hidden flex-shrink-0",children:e.avatarUrl?t("img",{src:e.avatarUrl,alt:e.username,class:"w-full h-full object-cover"}):e.username.charAt(0).toUpperCase()}),t("div",{class:"flex-1 min-w-0",children:[t("div",{class:"font-medium truncate",children:e.displayName||`@${e.username}`}),t("div",{class:"text-xs text-neutral-400 truncate",children:["@",e.username]}),t("div",{class:`text-xs ${d(e.score)}`,children:[e.score," - ",c(e.score)]})]})]})},e.id))}),n.value&&r.value.length===0&&i.value.trim()&&!v.value&&t("div",{class:"absolute z-10 w-full mt-1 bg-neutral-800 border border-neutral-700 rounded-md shadow-lg p-3 text-sm text-neutral-400",children:['No profiles found for "',i.value,'"']})]})]})}export{y as a};
